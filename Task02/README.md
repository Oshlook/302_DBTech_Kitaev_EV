# ETL утилита для создания базы данных movies_rating.db

## Описание

Данная утилита реализует процесс ETL (Extract, Transform, Load) для переноса данных из текстовых файлов в базу данных SQLite. Утилита генерирует SQL-скрипт для автоматического создания таблиц и загрузки данных.

## Требования к окружению

Для корректной работы скрипта `db_init.bat` на компьютере должны быть установлены:

1. **Python 3.x** - для выполнения скрипта `make_db_init.py`
   - Проверить установку: `python3 --version`

2. **SQLite 3** - для создания и управления базой данных
   - Проверить установку: `sqlite3 --version`

3. **Доступ к файлам данных** - в каталоге `dataset` должны находиться следующие файлы:
   - `movies.csv` - данные о фильмах
   - `ratings.csv` - данные о рейтингах
   - `tags.csv` - данные о тегах
   - `users.txt` - данные о пользователях

## Структура базы данных

После выполнения скрипта создается база данных `movies_rating.db` со следующими таблицами:

### Таблица movies
- `id` (INTEGER PRIMARY KEY) - идентификатор фильма
- `title` (TEXT) - название фильма
- `year` (INTEGER) - год выпуска (извлекается из названия)
- `genres` (TEXT) - жанры через разделитель |

### Таблица users
- `id` (INTEGER PRIMARY KEY) - идентификатор пользователя
- `name` (TEXT) - имя пользователя
- `email` (TEXT) - электронная почта
- `gender` (TEXT) - пол
- `register_date` (TEXT) - дата регистрации
- `occupation` (TEXT) - профессия

### Таблица ratings
- `id` (INTEGER PRIMARY KEY) - идентификатор рейтинга
- `user_id` (INTEGER) - идентификатор пользователя (FK)
- `movie_id` (INTEGER) - идентификатор фильма (FK)
- `rating` (REAL) - оценка
- `timestamp` (INTEGER) - временная метка

### Таблица tags
- `id` (INTEGER PRIMARY KEY) - идентификатор тега
- `user_id` (INTEGER) - идентификатор пользователя (FK)
- `movie_id` (INTEGER) - идентификатор фильма (FK)
- `tag` (TEXT) - текст тега
- `timestamp` (INTEGER) - временная метка

## Использование

1. Убедитесь, что все файлы данных находятся в каталоге `dataset`
2. Запустите скрипт:
   ```bash
   ./db_init.bat
   ```
   или
   ```bash
   bash db_init.bat
   ```

3. После выполнения будет создана база данных `movies_rating.db` с заполненными таблицами

## Файлы проекта

- `make_db_init.py` - Python скрипт для генерации SQL
- `db_init.bat` - shell скрипт для запуска процесса
- `db_init.sql` - генерируемый SQL-скрипт (создается автоматически)
- `movies_rating.db` - результирующая база данных SQLite (создается автоматически)

